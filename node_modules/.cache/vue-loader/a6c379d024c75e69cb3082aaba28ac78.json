{"remainingRequest":"/Users/gdezheleha/Documents/refresh/refresh/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gdezheleha/Documents/refresh/refresh/src/components/commonComponents/ImageClip/index.vue?vue&type=style&index=0&id=274fdc56&scoped=true&lang=scss&","dependencies":[{"path":"/Users/gdezheleha/Documents/refresh/refresh/src/components/commonComponents/ImageClip/index.vue","mtime":1574168785397},{"path":"/Users/gdezheleha/Documents/refresh/refresh/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gdezheleha/Documents/refresh/refresh/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/gdezheleha/Documents/refresh/refresh/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/gdezheleha/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gdezheleha/Documents/refresh/refresh/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gdezheleha/Documents/refresh/refresh/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5pbnB1dFBob3RvIHsKICAgIHdpZHRoOiAxMDAlOwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBtYXJnaW4tYm90dG9tOiAxMnB4OwoKICAgIGltZyB7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgICAgICAvKndpZHRoOiA2MnB4ICFpbXBvcnRhbnQ7Ki8KICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICBoZWlnaHQ6IGF1dG87CiAgICAgICAgbWF4LWhlaWdodDogMzAwcHg7CiAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7CiAgICB9Cn0KCi5jbGlwLWJ0bi13cmFwIHsKICAgIC8qcGFkZGluZy1ib3R0b206IDIwcHg7Ki8KfQoKLmJlZm9yZS11cGxvYWQgewogICAgZGlzcGxheTogZmxleDsKfQoKLnBob3RvLWV4YW1wbGUgewogICAgd2lkdGg6IDEwMCU7CiAgICBtYXgtd2lkdGg6IDg3cHg7CiAgICBtYXJnaW4tbGVmdDogNDBweDsKICAgIG1hcmdpbi10b3A6IDE2cHg7CiAgICBoZWlnaHQ6IGF1dG87CiAgICBtYXgtaGVpZ2h0OiAxMTZweDsKICAgIG9iamVjdC1maXQ6IGNvdmVyOwoKICAgIGltZyB7CiAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgaGVpZ2h0OiBhdXRvOwogICAgICAgIG9iamVjdC1maXQ6IGNvdmVyOwogICAgICAgIC8qbWF4LXdpZHRoOiA1NHB4OyovCiAgICB9Cn0KCi51cGxvYWQtaW5mby0td3JhcCB7CiAgICB3aWR0aDogMTAwJTsKICAgIHBhZGRpbmctbGVmdDogMzNweDsKfQoKLnVwbG9hZC1pbmZvIHsKICAgIG1hcmdpbi10b3A6IDI2cHg7CiAgICBwYWRkaW5nLWxlZnQ6IDA7CgogICAgcCB7CiAgICAgICAgY29sb3I6ICMwMDAwMDA7CiAgICAgICAgZm9udC1mYW1pbHk6IENhbGlicmk7CiAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgIH0KfQoKLnVwbG9hZC1idG4gewogICAgd2lkdGg6IDEwMCU7CgogICAgYnV0dG9uIHsKICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgfQp9CgouYnRuLWNhbmNlbCB7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjYjU0Mjg1OwogICAgY29sb3I6ICM0MzQzNDM7CiAgICBmb250LWZhbWlseTogIkNlbnR1cnkgR290aGljIjsKICAgIGZvbnQtc2l6ZTogMTZweDsKICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICBjdXJzb3I6IHBvaW50ZXI7CgogICAgJjpob3ZlciB7CiAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNkOTY3YTc7CiAgICB9Cn0KCi5pbWctcmVxdWlyZW1lbnRzIHsKICAgIGg2IHsKICAgICAgICBtYXJnaW4tdG9wOiAxMHB4OwogICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgZm9udC1mYW1pbHk6IENhbGlicmk7CiAgICB9CgogICAgb2wgewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIHBhZGRpbmctbGVmdDogMjBweDsKICAgICAgICBtYXJnaW4tdG9wOiAxNXB4OwogICAgfQoKICAgIGxpIHsKICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgbGluZS1oZWlnaHQ6IDEuMmVtOwogICAgICAgIGZvbnQtZmFtaWx5OiBDYWxpYnJpOwogICAgICAgIGNvbG9yOiAjMDAwOwogICAgfQp9CgouY2xpcHBlciB7CiAgICBtYXJnaW4tdG9wOiAyN3B4Owp9CgpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA1NDBweCkgewogICAgLnBob3RvLWV4YW1wbGUgewogICAgICAgIG1hcmdpbi1sZWZ0OiAyMHB4OwogICAgfQp9CgpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0MzBweCkgewogICAgLnVwbG9hZC1pbmZvLS13cmFwIHsKICAgICAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7CiAgICB9CiAgICAudXBsb2FkLWJ0biB7CiAgICAgICAgYnV0dG9uIHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgfQogICAgfQp9CgpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAzMjVweCkgewogICAgLnBob3RvLWV4YW1wbGUgewogICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4OwogICAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoMA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/commonComponents/ImageClip","sourcesContent":["<template>\n    <div class=\"inputPhoto\">\n        <div id=\"img1\">\n\n        </div>\n        <!--image upload data-->\n\n        <div\n                class=\"img-requirements\"\n                v-show=\"!file || !isShownClipper\"\n        >\n            <h6>\n                Фотографія повинна відповідати наступним вимогам\n            </h6>\n            <ol>\n                <li\n                        v-for=\"(elem, index) in $store.getters.getImageRequirements\"\n                        :key=\"index\"\n                >\n                    {{elem}}\n                </li>\n            </ol>\n        </div>\n\n        <div class=\"before-upload\" id=\"image-clipper\">\n            <div class=\"photo-example\">\n                <img v-if=\"!file \" src=\"../../../assets/PersonPhoto.png\" alt=\"Person photo example\">\n                <clipper-preview v-else name=\"my-preview\" class=\"my-clipper\">\n                </clipper-preview>\n            </div>\n            <div class=\"upload-info--wrap\">\n                <!--<div class=\"col-md-12\">-->\n                <div class=\"col-md-12 upload-info\">\n                    <p>\n                        Формат: .jpg файл<br>\n                        Розмір: Мах. 1mb, Min. {{minImgWidth}}х{{minImgHeight}}\n                    </p>\n                    <span\n                            class=\"error-msg\"\n                            v-if=\"isShownErrorMsg\"\n                    >\n                        <!--Це поле обовязкове-->\n                        {{getErrorMsg}}\n                    </span>\n                </div>\n                <clipper-upload v-model=\"file\" accept=\"image/*\" class=\"upload-btn\">\n                    <button type=\"button\" class=\"btn btn-pink\">\n                        {{uploadButtonText}}\n                    </button>\n                </clipper-upload>\n            </div>\n        </div>\n\n        <div v-if=\"isShownClipper\">\n            <div\n                    class=\"col-md-12 clipper\"\n            >\n                <clipper-basic\n                        :ratio=\"3/4\"\n                        :src=\"file\"\n                        ref=\"clipper\"\n                        preview=\"my-preview\"\n                ></clipper-basic>\n            </div>\n            <div class=\"col-md-12 clip-btn-wrap\" v-if=\"file\">\n                <button class=\"btn btn-cancel\" type=\"button\" @click=\"cancelImage\">\n                    Скасувати\n                </button>\n                <button type=\"button\" class=\"btn btn-pink\" @click=\"clipImg\">\n                    Зберегти фото\n                </button>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n// import changeProp from '../../PupilCard/mixins/changeProps'\n\nexport default {\n  // mixins: [changeProp],\n  data () {\n    return {\n      blobResult: null,\n      file: null,\n      isShownClipper: true,\n      dirty: false,\n      image: {\n        base64: null,\n        blobObj: null\n      },\n      errorMsg: '',\n      defaultErrorMsg: 'Це поле обовязкове',\n      biggerImgErrorMsg: 'Розмір фото перевищує дозволений',\n      smallerImgErrorMsg: 'Якість фото нижче ніж потрібно',\n      errorMsgType: 1,\n      minImgWidth: 480,\n      minImgHeight: 640\n    }\n  },\n  props: {\n    value: {\n      type: Object,\n      required: true\n    }\n  },\n  methods: {\n    cancelImage () {\n      this.file = null\n      this.$store.getters.getUser.personPhoto = null\n    },\n    async clipImg () {\n      const canvas = this.$refs.clipper.clip()// call component's clip method\n      const quality = 0.95\n      // validation\n      this.value.isDirtyFile = true\n      this.$emit('input', this.value)\n\n      // hide clipper block\n      this.isShownClipper = false\n\n      // check img size\n      const imageSize = canvas.height * canvas.width\n      const isAllowedImageSize = this.isAllowedImageSize(imageSize)\n\n      if (isAllowedImageSize) {\n        canvas.toBlob(bl => {\n          // this.$store.getters.getUser.personPhoto = bl;\n          // console.log(bl);\n          this.emitDataToParent(bl)\n        }, 'image/jpeg', quality)\n      } else {\n        // this.file = null;\n      }\n    },\n    isAllowedImageSize (imageSize) {\n      const min = this.minImgWidth * this.minImgHeight\n      const max = 4096 * 4096\n\n      if (imageSize > max) {\n        this.errorMsgType = 2\n        this.value.isValidFile = false\n        return false\n      } else if (imageSize < min) {\n        this.value.isValidFile = false\n        this.errorMsgType = 3\n        return false\n      } else {\n        this.errorMsgType = 1\n      }\n      return true\n    },\n    emitDataToParent (bl) {\n      this.$emit('save-image', bl)\n    }\n  },\n  watch: {\n    file (newVal, oldVal) {\n      this.value.isValidFile = !!newVal\n\n      this.value.isDirtyFile = true\n      this.$emit('input', this.value)\n\n      // show clipper blok\n      if (newVal && oldVal) {\n        this.isShownClipper = true\n      }\n    }\n  },\n  computed: {\n    uploadButtonText () {\n      return this.file ? 'Інше фото' : 'Завантажити фото'\n    },\n    isShownErrorMsg () {\n      return this.value.isDirtyFile === true && this.value.isValidFile === false\n    },\n    getErrorMsg () {\n      switch (this.errorMsgType) {\n        case 1:\n          return this.defaultErrorMsg\n          break;\n        case 2:\n          return this.biggerImgErrorMsg\n          break;\n        case 3:\n          return this.smallerImgErrorMsg\n          break;\n        default:\n          return this.defaultErrorMsg\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n    .inputPhoto {\n        width: 100%;\n        justify-content: center;\n        margin-bottom: 12px;\n\n        img {\n            margin-bottom: 20px;\n            /*width: 62px !important;*/\n            width: 100%;\n            height: auto;\n            max-height: 300px;\n            object-fit: cover;\n        }\n    }\n\n    .clip-btn-wrap {\n        /*padding-bottom: 20px;*/\n    }\n\n    .before-upload {\n        display: flex;\n    }\n\n    .photo-example {\n        width: 100%;\n        max-width: 87px;\n        margin-left: 40px;\n        margin-top: 16px;\n        height: auto;\n        max-height: 116px;\n        object-fit: cover;\n\n        img {\n            width: 100%;\n            height: auto;\n            object-fit: cover;\n            /*max-width: 54px;*/\n        }\n    }\n\n    .upload-info--wrap {\n        width: 100%;\n        padding-left: 33px;\n    }\n\n    .upload-info {\n        margin-top: 26px;\n        padding-left: 0;\n\n        p {\n            color: #000000;\n            font-family: Calibri;\n            font-size: 16px;\n            text-align: left;\n            font-weight: 400;\n        }\n    }\n\n    .upload-btn {\n        width: 100%;\n\n        button {\n            margin: 0;\n            -webkit-border-radius: 3px;\n            -moz-border-radius: 3px;\n            border-radius: 3px;\n        }\n    }\n\n    .btn-cancel {\n        border: 1px solid #b54285;\n        color: #434343;\n        font-family: \"Century Gothic\";\n        font-size: 16px;\n        font-weight: 700;\n        cursor: pointer;\n\n        &:hover {\n            color: white;\n            background-color: #d967a7;\n        }\n    }\n\n    .img-requirements {\n        h6 {\n            margin-top: 10px;\n            text-align: center;\n            font-size: 16px;\n            font-family: Calibri;\n        }\n\n        ol {\n            width: 100%;\n            padding-left: 20px;\n            margin-top: 15px;\n        }\n\n        li {\n            width: 100%;\n            font-size: 14px;\n            line-height: 1.2em;\n            font-family: Calibri;\n            color: #000;\n        }\n    }\n\n    .clipper {\n        margin-top: 27px;\n    }\n\n    @media screen and (max-width: 540px) {\n        .photo-example {\n            margin-left: 20px;\n        }\n    }\n\n    @media screen and (max-width: 430px) {\n        .upload-info--wrap {\n            padding-left: 10px;\n        }\n        .upload-btn {\n            button {\n                width: 100%;\n            }\n        }\n    }\n\n    @media screen and (max-width: 325px) {\n        .photo-example {\n            margin-left: 10px;\n        }\n    }\n</style>\n"]}]}